\documentclass[
12pt,
a4paper,
final,
titlepage,
oneside,
]{report}

\usepackage[
    colorlinks=true,
    urlcolor=blue,
    filecolor=blue,
    linkcolor=red,
    bookmarks=true,
    citecolor=red,
]{hyperref}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\usepackage{tocbibind}

%\usepackage{natbib}
%\bibliographystyle{plainnat}
%\setcitestyle{super,open={(},close={)}}%

\usepackage[hyperref=true, backend=bibtex, style=numeric, sorting=ynt]{biblatex}
%\bibliography{<database>}
%\bibliography{main}
\addbibresource{main.bib}
\DeclareCiteCommand{\citetitle}
  {\boolfalse{citetracker}%
   \boolfalse{pagetracker}%
   \usebibmacro{prenote}}
  {\ifciteindex
     {\indexfield{indextitle}}
     {}%
   \printtext[bibhyperref]{\printfield[citetitle]{labeltitle}}}
  {\multicitedelim}
  {\usebibmacro{postnote}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[frenchb]{babel}
\usepackage[utf8]{inputenc}
\usepackage{courier}
\usepackage{csquotes}
\usepackage[titles]{tocloft}
\usepackage{enumitem}
\usepackage{datetime}
\usepackage{float}
\usepackage{pdfpages}
\usepackage{nameref}
\usepackage{setspace}
\usepackage{import}
\usepackage[pagestyles]{titlesec}
\usepackage[T1]{fontenc}
\usepackage{fancyhdr}
\usepackage[
    titletoc,
    header,
    title
]{appendix}
\usepackage[
    font=footnotesize,
    labelfont=
    {
        sf,
        bf
    },
    margin=1cm
]{caption}
\usepackage{listings}
\usepackage{bold-extra}
\usepackage[
    top=3cm,
    bottom=3cm,
    left=2cm,
    right=2cm,
    headheight=2cm,
    headsep=1cm,
    footskip=2cm
]{geometry}
\usepackage[
    activate={true,nocompatibility},
    final,
    tracking=true,
    kerning=true,
    spacing=true,
    factor=1100,
    stretch=10,
    shrink=10
]{microtype}
\microtypecontext{spacing=nonfrench}
\usepackage{cleveref}
\usepackage{booktabs}
\usepackage{tabularx}

\newcolumntype{R}{>{\raggedleft\arraybackslash}X|}
%
\usepackage{array} 
\usepackage{graphicx}
\graphicspath{ {images/} }

% Nagger ------------------------------------------------------------------------------------
\RequirePackage[l2tabu, orthodox]{nag}
% Sets doc-wide fonts -----------------------------------------------------------------------
\renewcommand*\familydefault{\ttdefault}
% Setup caption for listings ----------------------------------------------------------------
%\captionsetup[lstlisting]{font={small,tt}}
\captionsetup{font={scriptsize, tt}, labelfont={sc, it},textfont={it, sc}}
% Fuzz --------------------------------------------------------------------
\hfuzz20pt % Don't bother to report over-full boxes if over-edge is < 2pt
% includes ----------------------------------------------------------------------------------
%\include{preamble/notebox}
\input{preamble/customcolorbox}
\input{preamble/format}
\input{preamble/constants}
\input{preamble/enum}
\input{preamble/pagestyle}
\input{preamble/customcolors}
\input{preamble/listingformat}
\input{preamble/figures}

\usepackage[acronym,toc]{glossaries}
% command: makeglossaries %
\makeglossaries

\input{glossary}

\newcommand{\titlepar}[2]{#1\vskip2mm#2}

\crefname{annex}{Annexe}{Annexes}
%\crefalias{annex}{Annexe}{Annexes}

\newcommand{\fullref}[1]{%
\cref{#1}: %
\nameref{#1}%
}

\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}

\makeatletter
%\renewcommand{\l@section}{\@dottedtocline{1}{1.5em}{2.6em}}
%\renewcommand{\l@subsection}{\@dottedtocline{2}{4.0em}{3.6em}}
\renewcommand{\l@subsubsection}{\@dottedtocline{3}{7em}{5em}}
\makeatother

% Start of document ----------------------------------------------------------------
\begin{document}

\hbadness=10000
\hfuzz20pt


\renewcommand\appendixpagename{Annexes}
\renewcommand\appendixtocname{Annexes}
\renewcommand\lstlistingname{Exemple}
\renewcommand\lstlistlistingname{Liste des exemples}
\renewcommand\listfigurename{Liste des images}
\renewcommand\listtablename{Liste des tableaux}
\renewcommand\contentsname{Table des matiÃ¨res}
\renewcommand\figurename{Img.}
\renewcommand\appendixname{Annexe}

\addto\captionsfrenchb{%
  \renewcommand\listfigurename{Liste des images}}

%bdabda\addtocontents{toc}{\protect{\pdfbookmark[0]{\contentsname}{toc}}}

\sloppy

\input{titlepage}
%\import{./}{titlepage.tex}

\addtocontents{toc}{~\hfill\textbf{Page}\par}

\pagenumbering{Roman}

\include{intro/1-disclaimer}
%\import{./intro/}{disclaimer.tex}

\include{intro/2-preface}
%\import{./intro/}{preface.tex}

\include{intro/3-pub_letter}
%\import{./intro/}{pub_letter.tex}

\include{intro/4-changelog}
%\import{./intro/}{changelog.tex}

\include{intro/5-conventions}
%\import{./intro/}{conventions.tex}

\nocite{*}
\printbibliography[heading=bibintoc, title=Bibliographie]

\newpage

\pagenumbering{arabic}

\renewcommand{\cftdot}{.}

\tableofcontents

\addtocontents{toc}{\protect{\pdfbookmark[0]{\contentsname}{toc}}}

\newpage

\pagestyle{default}

\include{chapters/1-introduction}

\include{chapters/2-commandandcontrol}

\include{chapters/3-planning}

\include{chapters/4-preparation}

\include{chapters/5-execution}

\include{chapters/comms}

\include{chapters/rwtactics}

\include{chapters/f-remerciements}

\newpage

\pagenumbering{Roman}

\phantomsection
%\addcontentsline{toc}{chapter}{\listfigurename}
\addtocontents{lof}{\protect\addcontentsline{toc}{chapter}{Liste des images}}
\listoffigures

\newpage

\phantomsection
%\addcontentsline{toc}{chapter}{\listtablename}
\addtocontents{lot}{\protect\addcontentsline{toc}{chapter}{Liste des tables}}
\listoftables

\newpage

\phantomsection
%\addcontentsline{toc}{chapter}{\lstlistlistingname}
\addtocontents{lol}{\protect\addcontentsline{toc}{chapter}{Liste des exemples}}
\lstlistoflistings{}

\newpage

\glossarystyle{altlist}
\printglossary[title=Glossaire, toctitle=Glossaire, type=main]

\newpage
\printglossary[title=Acronymes, toctitle=Acronymes, type=\acronymtype]

%\clearpage
%\phantomsection
%\addcontentsline{toc}{section}{Bibliographie}

\begin{appendices}
	
    \include{annexes/a-planning}
    
    \include{annexes/b-datacard}

\end{appendices}


\end{document} 