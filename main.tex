\documentclass[
12pt,
a4paper,
final,
titlepage,
oneside,
]{report}

\usepackage[T1]{fontenc}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Bibliography
\usepackage[hyperref=true, backend=bibtex, style=numeric, sorting=ynt]{biblatex}
\addbibresource{main.bib}
\DeclareCiteCommand{\citetitle}
  {\boolfalse{citetracker}%
   \boolfalse{pagetracker}%
   \usebibmacro{prenote}}
  {\ifciteindex
     {\indexfield{indextitle}}
     {}%
   \printtext[bibhyperref]{\printfield[citetitle]{labeltitle}}}
  {\multicitedelim}
  {\usebibmacro{postnote}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[frenchb]{babel}
\usepackage[utf8]{inputenc}
\usepackage{courier}
\usepackage{csquotes}
\usepackage[titles]{tocloft}
\usepackage{enumitem}
\usepackage{datetime}
\usepackage{float}
\usepackage{pdfpages}
\usepackage{nameref}
\usepackage{setspace}
\usepackage{import}
\usepackage[pagestyles]{titlesec}
\usepackage{fancyhdr}
\usepackage[
    titletoc,
    header,
    title
]{appendix}
\usepackage[
    font=footnotesize,
    labelfont={sf, bf},
    margin=1cm
]{caption}
\usepackage{listings}
\usepackage{bold-extra}
\usepackage[
    top=3cm,
    bottom=3cm,
    left=2cm,
    right=2cm,
    headheight=2cm,
    headsep=1cm,
    footskip=2cm
]{geometry}
\usepackage[
    activate={true,nocompatibility},
    final,
    tracking=true,
    kerning=true,
    spacing=true,
    factor=1100,
    stretch=10,
    shrink=10
]{microtype}
\microtypecontext{spacing=nonfrench}

\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{adjustbox}
%\usepackage{pdfpages}

\newcolumntype{R}{>{\raggedleft\arraybackslash}X|}
%
\usepackage{array} 
\usepackage{graphicx}
\graphicspath{ {images/} }

% Nagger ------------------------------------------------------------------------------------
\RequirePackage[l2tabu, orthodox]{nag}
% Sets doc-wide fonts -----------------------------------------------------------------------
\renewcommand*\familydefault{\ttdefault}
% Setup caption for listings ----------------------------------------------------------------
%\captionsetup[lstlisting]{font={small,tt}}
\captionsetup{font={scriptsize, tt}, labelfont={sc, it},textfont={it, sc}}
% Fuzz --------------------------------------------------------------------
\hfuzz=200pt % Don't bother to report over-full boxes if over-edge is < 2pt
% includes ----------------------------------------------------------------------------------
%\include{preamble/notebox}
\input{preamble/customcolorbox}
\input{preamble/format}
\input{preamble/constants}
\input{preamble/enum}
\input{preamble/pagestyle}
\input{preamble/customcolors}
\input{preamble/listingformat}
\input{preamble/figures}


\usepackage{minitoc}
\setcounter{minitocdepth}{2}%default 
\setcounter{minitocdepth}{6}
\setlength{\mtcindent}{24pt}%default
\setlength{\mtcindent}{12pt}%default
\renewcommand{\mtcfont}{\small\rm}%default
\renewcommand{\mtcSfont}{\small\bf}%default

\usepackage[
    colorlinks=true,
    urlcolor=blue,
    filecolor=blue,
    linkcolor=red,
    bookmarks=true,
    citecolor=red,
]{hyperref}
\usepackage{cleveref}
\usepackage{bookmark}
\usepackage[acronym,toc,nopostdot]{glossaries}
% command: makeglossaries %
%\renewcommand\glossarytitle{}
\makeglossaries

\input{glossary}
\renewcommand{\glossarysection}[2][]{}

\makeglossaries

\newcommand{\titlepar}[2]{#1\vskip2mm#2}

\crefname{annex}{Annexe}{Annexes}
%\crefalias{annex}{Annexe}{Annexes}

\newcommand{\fullref}[1]{%
Cfr. \cref{#1}: %
\nameref{#1}%
}

\newcommand{\smallref}[1]{%
\cref{#1}: %
\nameref{#1}%
}

\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}

\makeatletter
%\renewcommand{\l@section}{\@dottedtocline{1}{1.5em}{2.6em}}
%\renewcommand{\l@subsection}{\@dottedtocline{2}{4.0em}{3.6em}}
\renewcommand{\l@subsubsection}{\@dottedtocline{3}{7em}{5em}}
\makeatother

\DeclareFieldFormat{url}{\newline\mkbibacro{URL}\addcolon\space\url{#1}}
\renewbibmacro*{url+urldate}{%
 \printfield[url]{url}%   
 \iffieldundef{urlyear}     
 {}     
 {\setunit*{\addspace}%      
 \printtext[urldate]{\printurldate}}}



% Start of document ----------------------------------------------------------------
\begin{document}

\hbadness=10000
\hfuzz=200pt


\renewcommand\appendixpagename{Annexes}
\renewcommand\appendixtocname{Annexes}
\renewcommand\lstlistingname{Exemple}
\renewcommand\lstlistlistingname{Liste des exemples}
\renewcommand\listfigurename{Liste des images}
\renewcommand\listtablename{Liste des tableaux}
\renewcommand\contentsname{Table des matiÃ¨res}
\renewcommand\figurename{Img.}
\renewcommand\appendixname{Annexe}
\makeatletter\@openrightfalse\makeatother

\addto\captionsfrenchb{%
  \renewcommand\listfigurename{Liste des images}}

%bdabda\addtocontents{toc}{\protect{\pdfbookmark[0]{\contentsname}{toc}}}

\sloppy

\dominitoc
\dominilof
\dominilot

\input{titlepage}
%\import{./}{titlepage.tex}

\addtocontents{toc}{~\hfill\textbf{Page}\par}%
%
\pagenumbering{Roman}%
%
\fancyhf{}
%\fancyfoot[L]{\deflfoot{}}% Custom footer
%\fancyfoot[R]{\defrfoot{}}% Custom footer
\renewcommand{\headrulewidth}{0pt}% Line at the header visible
\renewcommand{\footrulewidth}{0pt}% Line at the header visible
%
\include{chapters/001disclaimer}%
%\import{./intro/}{disclaimer.tex}
%
\include{chapters/000publetter}%
%\import{./intro/}{pub_letter.tex}
%
\pagestyle{intro}%
%
\include{chapters/f-remerciements}%
%
\include{chapters/002preface}%
%\import{./intro/}{preface.tex}
%
\include{chapters/003changelog}%
%\import{./intro/}{changelog.tex}
%
\include{chapters/004conventions}%
%\import{./intro/}{conventions.tex}
%
\include{chapters/005biblio}%
%
\pagenumbering{arabic}%
%
\include{chapters/006toc}%
%
\pagestyle{default}%
%
\include{chapters/100-introduction}%
%
\include{chapters/200-commandandcontrol}%
%
\include{chapters/300-planning}%
%
\include{chapters/400-preparation}%
%
\include{chapters/500-execution}%
%
\newpage%
%
\pagestyle{intro}%
%
%\pagenumbering{Roman}%
%
\microtypesetup{protrusion=false}%
%
\invisibleunnumberedchapter{Listes}%
%
\invisibleunnumberedsection{Liste des images}%
\makeatletter%
\@starttoc{lof}% Print List of Figures
\makeatother%
%
\newpage%
%
\invisibleunnumberedsection{Liste des tableaux}%
\makeatletter%
\@starttoc{lot}% Print List of Figures
\makeatother%
%
%\phantomsection
%%\addcontentsline{toc}{chapter}{\listtablename}
%\addtocontents{lot}{\protect\addcontentsline{toc}{chapter}{Liste des tables}}
%\listoftables
%
\newpage%
%
\invisibleunnumberedsection{Liste des exemples}%
\makeatletter%
\@starttoc{lol}% Print List of Figures
\makeatother%
%
%
%\phantomsection
%%\addcontentsline{toc}{chapter}{\lstlistlistingname}
%\addtocontents{lol}{\protect\addcontentsline{toc}{chapter}{Liste des exemples}}
%\lstlistoflistings{}
%
\microtypesetup{protrusion=true}%
%
\newpage%
%
\invisibleunnumberedchapter{Glossaire}%
%
\glsaddall%
\glossarystyle{altlist}%
\invisibleunnumberedsection{Acronymes}%
%\printglossary[title=Acronymes, toctitle=Acronymes, type=\acronymtype]
\printglossary[type=\acronymtype]
%\printnoidxglossary[type=\acronymtype]%
%
\newpage%
%
\invisibleunnumberedsection{Explications des termes}%
%\printnoidxglossary[type=main]%
\printglossary[type=main]
%\printglossary[title=Glossaire, toctitle=Glossaire, type=main]
%
\clearpage%
%
\pagestyle{annexes}%
%
\begin{appendices}%
%	
\include{annexes/a-planning}%
%
\include{annexes/b-datacard}%
%
\include{annexes/c-casrequest}%
%
\end{appendices}%
%
\pagestyle{empty}%
%
\end{document}%